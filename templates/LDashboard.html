<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>Staff Dashboard</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" rel="stylesheet">
    <link href={{ url_for('static', filename='css/kebabStyle.css') }} rel="stylesheet">
    <link href={{ url_for('static', filename='css/LdashboardStyle.css') }} rel="stylesheet">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <form method="POST">
        <header class = "Header1">
            <h1 class="h1"><strong>Student Request Management System</strong></h1>
            <div class="pull-right username" id = "username">{{username}}</div>
        </header>
        <ul class="navSettings">
            <div class="kebabSettings">
                <figure></figure>
                <figure class="middle"></figure>
                <figure></figure>
                <ul class="dropdownSettings">
                    <li class="SettingsListItem"><a class="SettingsListItem" href="/change">Change Password</a></li>
                    <li class="SettingsListItem"><a href="/logout" class="SettingsListItem">Log Out</a></li>
                </ul>
            </div>
        </ul>
        <div class = "bg kebabHide"></div>
        <script>
            var kebab = document.querySelector('.kebabSettings'),
            middle = document.querySelector('.middle'),
            cross = document.querySelector('.cross'),
            bg = document.querySelector('.bg'),
            header1 = document.querySelector('.Header1'),
            istog = false;
            dropdown = document.querySelector('.dropdownSettings');

            function tog(value){
                if(value){
                    value = false;
                }else{
                    value = true;
                }
                return value;
            }

            kebab.addEventListener('click', function() {
                istog = tog(istog);
                if(istog){
                    bg.classList.remove('kebabHide');
                }
                middle.classList.toggle('active');
                dropdown.classList.toggle('active');
                if(!istog){
                    bg.classList.add('kebabHide');
                }
                
            })
            bg.addEventListener('click', function(){
                if(istog){
                    middle.classList.toggle('active');
                    dropdown.classList.toggle('active');
                    bg.classList.add('kebabHide');
                    istog = false;
                }
            })
            header1.addEventListener('click', function(){
                if(istog){
                    middle.classList.toggle('active');
                    dropdown.classList.toggle('active');
                    istog = false;
                }
            })
        </script>

        <div class="all">
            <div class="mainSettings">
                <div class="settingmodel-mysettings Settinghidden">
                    <input class="settingmodel-close"type="button" value="&times;">
                    <div><h3 id="settingTit"><strong>Change Password</strong></h3></div>
                    <div class="setrow">
                        <label class="lab"><strong>Username</strong></label>
                        <div>
                            <input type="text" readonly class="box1 fixed1" id="username2" value={{username}}>
                        </div>
                    </div>
                    <div class="setrow">
                        <label class="lab"><strong>Old Password</strong></label>
                        <div>
                            <input type="password" class="box1" id="OldPassword" name="OldPassword">
                        </div>
                    </div>
                    <div class="setrow">
                        <label class="lab"><strong>New Password</strong></label>
                        <div>
                            <input type="password" class="box1" id="NewPassword" name="NewPassword">
                        </div>
                    </div>
                    <div class="setrow">
                        <label class="lab"><strong>Confirm Password</strong></label>
                        <div>
                            <input type="password" class="box1" id="ConfirmPassword" name="ConfirmPassword">
                        </div>
                    </div>
                    <div class="warnning">
                        {{errorMessage}}
                    </div>
                    <button type="submit" class="btnChange" name="changePassword" value="changePassword"><strong>Change</strong></button>
                </div>
                <div class="settingmodel-background Settinghidden"></div>
            </div>
            <div class="container">
                <div class="row">
                <div class="col-sm-3">
                    <ul class="nav nav-pills nav-stacked nav-email shadow mb-20">
                        <li class="active">
                            <a>
                                <i class="fa fa-inbox"></i> Submissions <span class="label pull-right" id = "unreadLab1">{{length}}</span>
                            </a>
                        </li>
                        <li class="active filters1">
                            <a>
                                <i class="fa fa-filter"></i>Filters
                            </a>
                        </li>
                        <div class="OutFill">
                            <li class = "active">
                            <label class="lab1">Index&nbsp;&nbsp;&nbsp;&nbsp;</label><input type="text" class = 'fill ind' name='fromId'> - <input type="text" class='fill ind' name='toId'>
                            </li>
                            <li class = "active">
                            <label>Name&nbsp;&nbsp;&nbsp;</label><input type="text" class = 'fill fill2' name='name'>
                            </li>
                            <li>
                            <label for="RequestType">Request Type</label>
                            <div>
                                <select id="RequestType" name="RequestType" class="drop">
                                <option id="selectOption" value="" disabled selected hidden>
                                    -Select-
                                </option>
                                <option value="0" selected>None</option>
                                <option value="1">Late add/drop requests</option>
                                <option value="2">
                                    Repeat exams as first attempt with the next batch
                                </option>
                                <option value="3">
                                    Extend assignment submission deadlines
                                </option>
                                <option value="4">Rearrange of practical</option>
                                <option value="5">Other</option>
                                </select>
                            </div>
                            </li>
                            <li>
                            <label for="RequestType">Status</label>
                            <div class="col-75">
                                <select id="RequestType" name="StatusType" class="drop">
                                <option id="selectOption" value="" disabled selected hidden>
                                    -Select-
                                </option>
                                <option value=0 selected>None</option>
                                <option value=1>Not Responded</option>
                                <option value=2>Accepted</option>
                                <option value=3>Declined</option>
                                </select>
                            </div>
                            </li>
                            <button class="fillbtn btn" type="submit" name="filter" value="filter">Filter</button>
                        </div>
                    </ul><!-- /.nav -->
                </div>
                <div class="col-sm-9">
                    <div class="panel rounded shadow panel-teal">
                        <div class="panel-heading">
                            <div class="pull-left">
                                <h3 class="panel-title" id="unreadLab2"></h3>
                            </div>
                            <div class="clearfix"></div>
                        </div>
                        
                        <div class="panel-body no-padding">
                            
                            <div class="table-responsive">
                                <table class="table table-hover table-email">
                                    <tbody id="text">
                                        {% for application in applications %}
                                        {% if application[4]=="0"%}
                                        <tr class="unread">
                                            <td>
                                                <button class="btn subOpen" type="submit" name={{application[0]}} value={{application[0]}}></button>
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                                <div class="media">
                                                    <div class="media-body">
                                                        <h4 class="text-primary">{{application[1]}}</h4>
                                                        <p class="email-summary">{{application[2]}}</p>
                                                        <span class="media-meta">{{application[3]}}</span>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        {% else %}
                                        <tr>
                                            <td>
                                                <button class="btn subOpen" type="submit" name={{application[0]}} value={{application[0]}}></button>
                                            </td>
                                            <td>
                                            </td>
                                            <td>
                                                <div class="media">
                                                    <div class="media-body">
                                                        <h4 class="text-primary">{{application[1]}}</h4>
                                                        <p class="email-summary">{{application[2]}}</p>
                                                        <span class="media-meta">{{application[3]}}</span>
                                                    </div>
                                                </div>
                                            </td>
                                        </tr>
                                        {% endif %}
                                        {% endfor %}
                                    </tbody>
                                </table>
                            </div>                            
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</body>
</html>